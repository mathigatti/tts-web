<!DOCTYPE html>
<!-- saved from url=(0022)https://fifteen.ai/app -->
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link rel="icon" href="./imgs/favicon.png" />
        <link rel="stylesheet" href="./styles/all.min.css" />
        <link rel="stylesheet" href="./styles/pro.min.css" media="all" />
        <link rel="stylesheet" href="./styles/pro-v4-font-face.min.css" media="all" />
        <link rel="stylesheet" href="./styles/pro-v4-shims.min.css" media="all" />
        <title>Voces Artificiales</title>
        <meta name="viewport" content="width=device-width,user-scalable=no" />
        <meta name="description" content="Herramienta de conversión de texto a voz." />
        <link href="./styles/app.3cb910f5.css" rel="preload" as="style" />
        <link href="./styles/chunk-vendors.1c2cab8f.css" rel="preload" as="style" />
        <link href="./styles/chunk-vendors.1c2cab8f.css" rel="stylesheet" />
        <link href="./styles/app.3cb910f5.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style type="text/styles">
            .resize-observer[data-v-b329ee4c] {
                position: absolute;
                top: 0;
                left: 0;
                z-index: -1;
                width: 100%;
                height: 100%;
                border: none;
                background-color: transparent;
                pointer-events: none;
                display: block;
                overflow: hidden;
                opacity: 0;
            }
            .resize-observer[data-v-b329ee4c] object {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                overflow: hidden;
                pointer-events: none;
                z-index: -1;
            }
        </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    </head>
    <body>
        <noscript><strong></strong></noscript>
        <div data-v-c23a3218="" id="app" class="h-screen">
            <div data-v-c23a3218="">
                <header data-v-77fe39de="" id="header" class="w-full sticky top-0 z-40 h-12 flex items-center justify-between bg-white">
                    <div data-v-77fe39de="" class="flex items-center justify-between w-288 px-1 sm:px-4 mx-auto">
                        <div data-v-77fe39de="" class="flex items-center">
                            <div data-v-77fe39de="" class="flex mr-2 sm:hidden p-2 rounded hover:bg-gray-200 cursor-pointer"><i data-v-77fe39de="" class="fas fa-bars" aria-hidden="true"></i></div>
                            <div data-v-77fe39de="" class="mr-8 font-bold">
                                <a data-v-77fe39de="" href="https://mathigatti.com/"><p data-v-77fe39de="" class="text-black hover:text-gray-600">Mathi Gatti</p></a>
                            </div>
                        </div>
                    </div>
                </header>
                <div>
                    <div class="w-full sm:w-288 px-4 mx-auto mt-2 sm:mt-8 flex flex-col sm:flex-row items-center justify-start">
                        <div id="image" class="w-full sm:w-1/4 h-56 bg-transparent text-center flex items-center mr-2 cursor-pointer rounded-lg hover:opacity-100 hover:bg-gray-200">
                            <img id="character-picture" src="./imgs/cortazar.jpg" class="w-auto h-auto mx-auto" style="max-width: 100.0%; max-height: 250px;" />                            
                        </div>
                        <form id="gen-form" class="w-full sm:w-100% bg-transparent h-24 sm:h-56 flex flex-col items-center ml-2">

                                <div class="w-full h-full">
                                    <textarea  id="text" name="text" type="text" placeholder="Escribí algo acá. Luego presioná Generar para escuchar el audio resultante. (Máximo 200 caracteres)" maxlength="200" spellcheck="false" class="resize-none border rounded focus:outline-none focus:shadow-outline h-full w-full p-2 mt-4"></textarea>
                                    <span class="float-right text-lg text-gray-600">200</span>
                                </div>
                                <div class="flex items-center mt-12">
                                    <div data-original-title="null" class="has-tooltip">
                                        <button type="submit" name="submit" id="generate-voice" class="w-32 font-semibold py-2 px-3 text-sm border border-gray-400 rounded shadow mx-2 focus:outline-none bg-gray-300 text-gray-800 button is-link">
                                            <div>Generar <i class="fas fa-waveform ml-1" aria-hidden="true"></i></div>
                                        </button>
                                    </div>
                                    <div>
                                        <a id="download-voice" class="w-28 font-semibold py-2 px-3 text-sm border border-gray-400 rounded shadow mx-2 focus:outline-none bg-gray-300 text-gray-800 button is-link" href="#" download="audio.mp3">
                                            <div><i class="fa fa-download"></i></div>
                                        </a>
                                    </div>
                                        <div data-original-title="null" class="has-tooltip">

                                        <audio controls>
                                        <source id="source" src="" type="audio/mp3">
                                        Your browser does not support the audio element.
                                        </audio>
                                    </div>
                                </div>
                        </form>
                    </div>

                    <div class="w-full sm:w-288 px-4 mx-auto mt-2 sm:mt-8 mb-2 sm:mb-8 flex items-center flex-col sm:flex-row">
                        <div class="w-full flex items-center sm:w-auto flex-col sm:flex-row">
                            <span class="w-full sm:w-84 bg-white cursor-pointer">
                                <select name="character" id="character"  class="multiselect__tags multiselect__single">
                                    <option value="cortazar">Julio Cortazar [ESP]</option>
                                    <option value="spinetta">Luis Alberto Spinetta [ESP]</option>
                                    <option value="gibi">ASMRtist [ENG]</option>
                                    <option value="kid">Kid [ENG]</option>
                                </select>
                            </span>
                        </div>
                    </div>
                    <div>
                        <div class="w-full sm:w-288 h-90 text-left px-4 mx-auto my-8 flex flex-col items-left justify-center text-gray-600 text-s">
                            <p><b>Notas</b></br>
                            - El tiempo de procesamiento puede extenderse algunos minutos.</br>
                            - Si un texto no fue pronunciado correctamente podés intentar reescribirlo.</br>
                            - Por ejemplo agregando signos de puntuación o separando una palabra en sílabas.</br>
                            - Voces en inglés se indican con [ENG]. Voces en español con [ESP].</br>
                            </p>
                        </div>
                    </div>


                    <div>
                        <div class="w-full sm:w-288 h-36 text-center px-4 mx-auto my-8 flex flex-col items-center justify-center text-gray-600 text-xl">
                            <div class="text-sm text-gray-700 font-medium my-4 sm:mt-8">Desarrollado por <a href="http://mathigatti.com/about/" target="_blank">Mathias Gatti</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
  </script>

<script type="text/javascript">

var loaded_voice = 'cortazar';
const pictures = {'cortazar':'./imgs/cortazar.jpg','gibi':'./imgs/asmr.jpg', 'spinetta': './imgs/spinetta.png', 'kid': './imgs/kid.png'}

$('#character').change(function(){
    loaded_voice = $(this).val();
    $('#character-picture').attr('src', pictures[loaded_voice]);
})

$('#download-voice').attr('disabled','disabled');


function load_song(urlToSend) {
     var req = new XMLHttpRequest();
     req.open("GET", urlToSend, true);
     req.responseType = "blob";
     req.onload = function (event) {
         var blob = req.response;
         var link=document.createElement('a');
         link.href=window.URL.createObjectURL(blob);
         link.download="audio.mp3";
         $('audio #source').attr('src', link.href);
         $('#download-voice').attr('href', link.href);
         $('audio').get(0).load();
         $('audio').get(0).play();
         //link.click();
     };
     req.onreadystatechange = function(event) {
        $('#generate-voice').removeClass("is-loading");
        $('#generate-voice').prop("disabled", false);
        $('#download-voice').attr('disabled', false);
     }
     req.send();
}

/*
var player = $('audio').get(0);
player.onloadeddata = function() {
        $('#generate-voice').removeClass("is-loading");
        $('#generate-voice').prop("disabled", false);
        $('#download-voice').prop("disabled", false);
};
*/


$(function () {
    $('#gen-form').submit(function (e) {
        e.preventDefault();
        $('#generate-voice').addClass("is-loading");
        $('#generate-voice').prop("disabled", true);

        data = getInputValues();
        url = "http://127.0.0.1:8080/?text="+encodeURIComponent(data["text"]) + "&model=" + loaded_voice;
        load_song(url);
    });
    $('#clear-text').click(function (e) {
      $('#model-output').text('')
    });
});

function getInputValues() {
    var inputs = {};
    $("textarea").each(function () {
        inputs[$(this).attr('id')] = $(this).val();
    });
    return inputs;
}

</script>
</html>
